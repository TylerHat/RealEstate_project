import requests
from bs4 import BeautifulSoup
from flask import Flask, render_template

app = Flask(__name__)

class House:
    def __init__(self, address, price, bedrooms, bathrooms, sqft):
        self.address = address
        self.price = price
        self.bedrooms = bedrooms
        self.bathrooms = bathrooms
        self.sqft = sqft

def scrape_zillow(address):
    url = f"https://www.zillow.com/homes/{address}_rb/"
    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3"
    }

    response = requests.get(url, headers=headers)
    soup = BeautifulSoup(response.content, "html.parser")

    price = soup.find("div", class_="ds-price").text.strip()
    bedrooms = soup.find("span", class_="ds-bed-bath-living-area").find("span", class_="ds-bed-bath-living-area-item").text.strip()
    bathrooms = soup.find("span", class_="ds-bed-bath-living-area").find_all("span", class_="ds-bed-bath-living-area-item")[1].text.strip()
    sqft = soup.find("span", class_="ds-bed-bath-living-area").find_all("span", class_="ds-bed-bath-living-area-item")[2].text.strip()

    return House(address, price, bedrooms, bathrooms, sqft)

@app.route('/house/<address>')
def get_house_details(address):
    house = scrape_zillow(address)
    return render_template('house_details.html', house=house)

if __name__ == '__main__':
    app.run()
